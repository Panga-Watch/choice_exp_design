---
title: "Choice Experiment Design"
author: "Gage Clawson"
date: "5/16/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(AlgDesign)
```

Reference: https://pdfs.semanticscholar.org/b0fb/05e51e02d4eda914888ae0590dd65b45ff9a.pdf

Step 1: create full factorial design
```{r}
ffd <- gen.factorial(c(2,3,3), varNames = c("SOS", "info", "IUU"), factors = "all") # construct a full factorial design which has two 3 level attributes and one 2 level attribute. factors = "all" indicates that all arguments are factors
ffd

#SOS: 1 = No, 2 = Yes
#info: 1 = Anon/available to everyone, 2 = anon/available to GFW, 3 = open to everyone
#IUU: 1 = 50%, 2 = 20%, 3 = 0%
```
Step 3 (step 2 is skipped): Make copies of full factorial design
```{r}
alt1 <- ffd #save alt1 as our first design
alt2 <- alt1 #save a copy of alt1 as alt2 so we can randomize
```

Step 4: Create choice sets by using random selection without replacement
```{r}
#add a uniform random number to alt1 
alt1 <- transform(alt1, r1 = runif(18))
alt1

#do the same to alt2
alt2 <- transform(alt2, r2=runif(18))
alt2


#sort each design by the random number
alt1_sort <- alt1[order(alt1$r1), ]
alt1_sort

alt2_sort <- alt2[order(alt2$r2), ]
alt2_sort

#write.csv(alt1_sort, "package1_design_raw")
#write.csv(alt2_sort, "package2_design_raw")

```




